"use strict";(self.webpackChunkbisema_basic=self.webpackChunkbisema_basic||[]).push([[925],{6925:(P,v,s)=>{s.r(v),s.d(v,{AdminModule:()=>Z});var b=s(6895),U=s(6491),i=s(433),e=s(1571),x=s(5136);class c extends x.b{constructor(t){super(t)}sendEmail(t){return this._networkService.post("api/order/mail",t)}getUsers(){let t=JSON.parse(this._storageService.getItem("user"));return this._networkService.get(`api/dealer/users/${t.id}`)}addUser(t){return this._networkService.post("api/dealer/users/create",t)}deleteUser(t){return this._networkService.delete(`api/user/deleteUser/${t}`)}}c.\u0275fac=function(t){return new(t||c)(e.LFG(e.zs3))},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac});var T=s(1815),m=s(2687),p=s(7103),A=s(2216);class u{constructor(t,r){this.adminService=t,this.router=r,this.faUserCircle=m.m08}logout(){this.adminService._storageService.removeItem("user"),this.router.navigateByUrl("/login")}}u.\u0275fac=function(t){return new(t||u)(e.Y36(c),e.Y36(U.F0))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-admin-header"]],decls:18,vars:1,consts:[[1,"navbar","navbar-dark","bg-purple","navbar-expand-sm"],[1,"container-fluid","align-items-center","px-0"],[1,"d-flex","align-items-center","me-5"],["href","http://www.bisema.com","target","_blank",1,"navbar-brand"],["src","../assets/img/bisema_logo.jpg","alt","logo","height","35"],[1,"navbar-text","text-white","h5","me-5","pe-5","d-md-block","d-none"],[1,"me-2"],["ngbDropdown","","display","dynamic","placement","bottom-end",1,"nav-item","ms-3"],["tabindex","0","ngbDropdownToggle","","id","navbarDropdown3","role","button",1,"nav-link","text-white"],[3,"icon"],["ngbDropdownMenu","","aria-labelledby","navbarDropdown3",1,"dropdown-menu"],["ngbDropdownItem","","routerLink","/cart"],["ngbDropdownItem","","routerLink","/admin/users"],["ngbDropdownItem","","href","javascript:;",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),e._UZ(4,"img",4),e.qZA()(),e.TgZ(5,"div",5),e._uU(6," BiSemA Corporation Cloud Specification Services "),e.qZA(),e.TgZ(7,"div",6)(8,"div",7)(9,"a",8),e._UZ(10,"fa-icon",9),e.qZA(),e.TgZ(11,"div",10)(12,"a",11),e._uU(13,"Cart"),e.qZA(),e.TgZ(14,"a",12),e._uU(15,"Users"),e.qZA(),e.TgZ(16,"a",13),e.NdJ("click",function(){return r.logout()}),e._uU(17,"Log Out"),e.qZA()()()()()()),2&t&&(e.xp6(10),e.Q6J("icon",r.faUserCircle))},dependencies:[p.jt,p.iD,p.Vi,p.TH,p.M2,A.BN,U.rH]});class g{}g.\u0275fac=function(t){return new(t||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-admin-footer"]],decls:19,vars:0,consts:[[1,"row","bg-purple","pt-3"],[1,"col-12"],[1,"d-flex","justify-content-center"],[1,"list-inline","list-unstyled","m-0"],[1,"list-inline-item"],["href","https://www.facebook.com","target","https://www.facebook.com/bisemacorp",1,"text-white"],[1,"fa-brands","fa-facebook","fa-2x","me-2"],["href","https://www.linkedin.com ","target","https://www.linkedin.com/bisema-corporation",1,"text-white"],[1,"fa-brands","fa-linkedin","fa-2x","me-2"],["href","https://www.twitter.com ","target","https://www.twitter.com/bisemacorp",1,"text-white"],[1,"fa-brands","fa-twitter","fa-2x"],[1,"text-center","mt-3"],[1,"text-white"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),e._UZ(6,"i",6),e.qZA()(),e.TgZ(7,"li",4)(8,"a",7),e._UZ(9,"i",8),e.qZA()(),e.TgZ(10,"li",4)(11,"a",9),e._UZ(12,"i",10),e.qZA()()()(),e.TgZ(13,"div",11)(14,"p",12),e._uU(15,"Copyright "),e.TgZ(16,"span"),e._uU(17,"\xa9"),e.qZA(),e._uU(18," 2023 BiSemA Corporation."),e.qZA()()()())}});const C=["dataToExport"];function q(o,t){if(1&o&&(e.TgZ(0,"tr",27)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"currency"),e.qZA()()),2&o){const r=t.$implicit,n=t.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(r.displayName),e.xp6(2),e.Oqu(e.lcZ(7,5,r.unitPrice)),e.xp6(3),e.Oqu(r.quantity),e.xp6(2),e.Oqu(e.lcZ(12,7,r.quantity*r.unitPrice))}}const w=function(){return{label1:"Name"}},y=function(){return{label1:"Email"}},k=function(){return{label1:"Phone"}},J=function(){return{label1:"Address"}};class _{constructor(t,r){this.fb=t,this.adminService=r,this.fromPerson=this.fb.group({name:["",[i.kI.required]],email:["",[i.kI.required,i.kI.email]],phone:["",[i.kI.required]],address:["",[i.kI.required]]}),this.cart=[],this.grandTotal=null}getCart(){let t=this.adminService._storageService.getItem("user");t=JSON.parse(t),this.adminService.getCartItemsByUserIDProjectIDAndManufacturingCompany(t.id,t.projectID,"").subscribe({next:r=>{r&&r.data&&(this.cart=r.data,this.loadCartDetails())}})}loadCartDetails(){let t=0;this.cart.length>0&&this.cart.forEach(r=>{t+=+r.quantity*r.unitPrice}),this.grandTotal=parseFloat(t.toString()).toFixed(2)}order(){let t=this,r=this.dataToExport.nativeElement;html2pdf().from(r).set({image:{type:"jpeg",quality:.98},html2canvas:{scale:3},jsPDF:{unit:"cm",format:"letter",orientation:"landscape"}}).toPdf().output("datauristring").then(function(a){a=a.split(",")[1],console.log(a);let d=new FormData;d.append("pdf",a),d.append("email","bisema@gmail.com"),d.append("cart",JSON.stringify(t.cart)),d.append("users_email",`${t.fromPerson.value.email}`),d.append("user_name",`${t.fromPerson.value.name}`),t.adminService.sendEmail(d).subscribe({next:E=>{console.log(E)}})})}ngOnInit(){this.getCart()}}function F(o,t){if(1&o){const r=e.EpF();e.TgZ(0,"tr")(1,"th",10),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"a",11),e.NdJ("click",function(){const l=e.CHM(r).$implicit,d=e.oxw();return e.KtG(d.deleteUser(l.email))}),e._UZ(7,"fa-icon",12),e.qZA()()()}if(2&o){const r=t.$implicit,n=t.index,a=e.oxw();e.xp6(2),e.Oqu(n+1),e.xp6(2),e.hij(" ",r.email," "),e.xp6(3),e.Q6J("icon",a.faTrash)}}_.\u0275fac=function(t){return new(t||_)(e.Y36(i.qu),e.Y36(c))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-checkout"]],viewQuery:function(t,r){if(1&t&&e.Gf(C,5),2&t){let n;e.iGM(n=e.CRH())&&(r.dataToExport=n.first)}},decls:98,vars:24,consts:[[1,"container-fluid","bg-white"],[1,"row","px-4"],[1,"row"],["dataToExport",""],[1,"col-12"],[1,"d-flex","justify-content-between","py-2"],[1,"mt-2"],[1,"border-dark"],[1,"col-md-6","col-12"],[1,"mt-4"],[3,"formGroup"],["for","from_name",1,"form-label"],["type","text","id","from_name","placeholder","Enter Name","formControlName","name",1,"form-control"],[1,"text-danger"],["fieldType","input",3,"control","labels"],["for","from_email",1,"form-label"],["type","email","id","from_email","placeholder","Enter Email","formControlName","email",1,"form-control"],["for","from_phone",1,"form-label"],["type","text","id","from_phone","placeholder","Enter Phone","formControlName","phone",1,"form-control"],["for","from_address",1,"form-label"],["id","from_address","rows","3","formControlName","address",1,"form-control"],[1,"table","table-striped"],[1,"thead-light"],["class","",4,"ngFor","ngForOf"],[1,"border","border-0"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn2","me-1","px-3",3,"disabled","click"],[1,""]],template:function(t,r){1&t&&(e._UZ(0,"app-admin-header"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2,3)(5,"div",4)(6,"div",5)(7,"h4",6),e._uU(8," Invoice "),e.qZA()()(),e._UZ(9,"hr",7),e.TgZ(10,"div",8)(11,"h2",9),e._uU(12,"Buyer's Information : "),e.qZA(),e.TgZ(13,"form",10)(14,"div")(15,"label",11),e._uU(16,"Name"),e.qZA(),e._UZ(17,"input",12),e.TgZ(18,"label",13),e._UZ(19,"app-form-error-message",14),e.qZA()(),e.TgZ(20,"div")(21,"label",15),e._uU(22,"Email"),e.qZA(),e._UZ(23,"input",16),e.TgZ(24,"label",13),e._UZ(25,"app-form-error-message",14),e.qZA()(),e.TgZ(26,"div")(27,"label",17),e._uU(28,"Phone"),e.qZA(),e._UZ(29,"input",18),e.TgZ(30,"label",13),e._UZ(31,"app-form-error-message",14),e.qZA()(),e.TgZ(32,"div")(33,"label",19),e._uU(34,"Address"),e.qZA(),e._UZ(35,"textarea",20),e.TgZ(36,"label",13),e._UZ(37,"app-form-error-message",14),e.qZA()()()(),e.TgZ(38,"div",8)(39,"h2",9),e._uU(40,"Product Details"),e.qZA(),e.TgZ(41,"table",21)(42,"thead",22)(43,"tr")(44,"th"),e._uU(45,"#"),e.qZA(),e.TgZ(46,"th"),e._uU(47,"Description"),e.qZA(),e.TgZ(48,"th"),e._uU(49,"Rate"),e.qZA(),e.TgZ(50,"th"),e._uU(51,"Quantity"),e.qZA(),e.TgZ(52,"th"),e._uU(53,"Amount"),e.qZA()()(),e.TgZ(54,"tbody"),e.YNc(55,q,13,9,"tr",23),e.TgZ(56,"tr"),e._UZ(57,"td",24)(58,"td",24),e.TgZ(59,"td"),e._uU(60,"Sub Total"),e.qZA(),e._UZ(61,"td"),e.TgZ(62,"td"),e._uU(63),e.ALo(64,"currency"),e.qZA()(),e.TgZ(65,"tr"),e._UZ(66,"td",24)(67,"td",24),e.TgZ(68,"td"),e._uU(69,"Tax (5%)"),e.qZA(),e._UZ(70,"td"),e.TgZ(71,"td"),e._uU(72,"0"),e.qZA()(),e.TgZ(73,"tr"),e._UZ(74,"td",24)(75,"td",24),e.TgZ(76,"td"),e._uU(77,"Total"),e.qZA(),e._UZ(78,"td"),e.TgZ(79,"td"),e._uU(80),e.ALo(81,"currency"),e.qZA()(),e.TgZ(82,"tr"),e._UZ(83,"td",24)(84,"td",24),e.TgZ(85,"td"),e._uU(86,"Balance Due"),e.qZA(),e._UZ(87,"td"),e.TgZ(88,"td")(89,"b"),e._uU(90,"CAD"),e.qZA(),e._uU(91),e.ALo(92,"currency"),e.qZA()()()()()(),e._UZ(93,"hr",7),e.TgZ(94,"div",25)(95,"button",26),e.NdJ("click",function(){return r.order()}),e._uU(96," Order "),e.qZA()()(),e._UZ(97,"app-admin-footer"),e.qZA()),2&t&&(e.xp6(13),e.Q6J("formGroup",r.fromPerson),e.xp6(6),e.Q6J("control",r.fromPerson.get("name"))("labels",e.DdM(20,w)),e.xp6(6),e.Q6J("control",r.fromPerson.get("email"))("labels",e.DdM(21,y)),e.xp6(6),e.Q6J("control",r.fromPerson.get("phone"))("labels",e.DdM(22,k)),e.xp6(6),e.Q6J("control",r.fromPerson.get("address"))("labels",e.DdM(23,J)),e.xp6(18),e.Q6J("ngForOf",r.cart),e.xp6(8),e.Oqu(e.lcZ(64,14,r.grandTotal)),e.xp6(17),e.Oqu(e.lcZ(81,16,r.grandTotal)),e.xp6(11),e.hij(" ",e.lcZ(92,18,r.grandTotal),""),e.xp6(4),e.Q6J("disabled",!r.fromPerson.valid))},dependencies:[b.sg,T.J,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,u,g,b.H9]});const S=function(){return{label1:"Email"}},D=function(){return{label1:"Password"}};function N(o,t){if(1&o){const r=e.EpF();e.TgZ(0,"div",13)(1,"h4",14),e._uU(2,"Create User"),e.qZA(),e.TgZ(3,"button",15),e.NdJ("click",function(){const l=e.CHM(r).$implicit;return e.KtG(l.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"div",16)(5,"form",17),e.NdJ("submit",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.createUser())}),e.TgZ(6,"div",18)(7,"div",19),e._UZ(8,"input",20),e.TgZ(9,"div",21)(10,"span",22),e._UZ(11,"fa-icon",12),e.qZA()()(),e.TgZ(12,"label",23),e._UZ(13,"app-form-error-message",24),e.qZA()(),e.TgZ(14,"div",18)(15,"div",19),e._UZ(16,"input",25),e.TgZ(17,"div",21)(18,"span",22),e._UZ(19,"fa-icon",12),e.qZA()()(),e.TgZ(20,"label",23),e._UZ(21,"app-form-error-message",24),e.qZA()(),e.TgZ(22,"div",26)(23,"button",27),e.NdJ("click",function(){const l=e.CHM(r).$implicit;return e.KtG(l.close("Close click"))}),e._uU(24,"Close"),e.qZA(),e.TgZ(25,"button",28),e.NdJ("click",function(){const l=e.CHM(r).$implicit;return e.KtG(l.close("Close click"))}),e._UZ(26,"fa-icon",12),e._uU(27," Create "),e.qZA()()()()}if(2&o){const r=e.oxw();e.xp6(5),e.Q6J("formGroup",r.userForm),e.xp6(6),e.Q6J("icon",r.faEnvelope),e.xp6(2),e.Q6J("control",r.userForm.get("email"))("labels",e.DdM(9,S)),e.xp6(6),e.Q6J("icon",r.faKey),e.xp6(2),e.Q6J("control",r.userForm.get("password"))("labels",e.DdM(10,D)),e.xp6(4),e.Q6J("disabled",!r.userForm.valid),e.xp6(1),e.Q6J("icon",r.faArrowRight)}}class h{constructor(t,r,n){this.adminService=t,this.modalService=r,this.fb=n,this.faPencil=m.TzT,this.faTrash=m.$aW,this.faEnvelope=m.FU$,this.faKey=m.DD4,this.faArrowRight=m.eFW,this.users=[],this.userForm=this.fb.group({email:["",[i.kI.required,i.kI.email]],password:["",[i.kI.required]]})}getUsers(){this.adminService.getUsers().subscribe({next:t=>{this.users=t.data},error:t=>{console.log(t)}})}deleteUser(t){this.adminService.deleteUser(t).subscribe({next:r=>{this.getUsers()},error:r=>{}})}openUserModal(t){this.modalService.open(t,{centered:!0})}createUser(){let t=JSON.parse(this.adminService._storageService.getItem("user")),r=this.userForm.value;r.dealers_id=t.id,this.adminService.addUser(r).subscribe({next:n=>{"error"!=n.status&&this.getUsers()},error:n=>{console.log(n)}})}ngOnInit(){this.getUsers()}}h.\u0275fac=function(t){return new(t||h)(e.Y36(c),e.Y36(p.FF),e.Y36(i.qu))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-users"]],decls:23,vars:1,consts:[[1,"container-fluid","bg-white"],[1,"row"],[1,"col-12-5"],[1,"d-flex","justify-content-between","align-items-center"],[1,"my-3"],[1,"btn","btn-light","btn2",3,"click"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],["content",""],["scope","row"],["href","javascript:;",1,"text-danger",3,"click"],[3,"icon"],[1,"modal-header","bg-purple"],[1,"modal-title","text-white"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","bg-purple"],[3,"formGroup","submit"],[1,"form-group","mb-1"],[1,"input-group"],["type","text","placeholder","Your Email","formControlName","email",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],[1,"text-white"],["fieldType","input",3,"control","labels"],["type","password","placeholder","Your Password","formControlName","password",1,"form-control"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-light","ms-2",3,"click"],["type","submit",1,"btn","btn-light","btn2",3,"disabled","click"]],template:function(t,r){if(1&t){const n=e.EpF();e._UZ(0,"app-admin-header"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h4",4),e._uU(6,"My Users"),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(22);return e.KtG(r.openUserModal(l))}),e._uU(8,"New User"),e.qZA()(),e.TgZ(9,"table",6)(10,"thead")(11,"tr")(12,"th",7),e._uU(13,"#"),e.qZA(),e.TgZ(14,"th",7),e._uU(15,"Email"),e.qZA(),e.TgZ(16,"th",7),e._uU(17,"Actions"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,F,8,3,"tr",8),e.qZA()()()(),e._UZ(20,"app-admin-footer"),e.qZA(),e.YNc(21,N,28,11,"ng-template",null,9,e.W1O)}2&t&&(e.xp6(19),e.Q6J("ngForOf",r.users))},dependencies:[b.sg,T.J,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,A.BN,u,g]});const M=[{path:"checkout",component:_},{path:"users",component:h}];class f{}f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[U.Bz.forChild(M),U.Bz]});var I=s(710);class Z{}Z.\u0275fac=function(t){return new(t||Z)},Z.\u0275mod=e.oAB({type:Z}),Z.\u0275inj=e.cJS({providers:[c],imports:[b.ez,I.m,f]})}}]);