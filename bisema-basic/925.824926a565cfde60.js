"use strict";(self.webpackChunkbisema_basic=self.webpackChunkbisema_basic||[]).push([[925],{6925:(E,_,a)=>{a.r(_),a.d(_,{AdminModule:()=>m});var b=a(6895),v=a(6491),r=a(433),t=a(1571),U=a(5136);class s extends U.b{constructor(e){super(e)}sendEmail(e){return this._networkService.post("api/order/mail",e)}getAdminCartItems(e,o){return this._networkService.get(`api/get/admin/cart/${e}/${o}`)}}s.\u0275fac=function(e){return new(e||s)(t.LFG(t.zs3))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac});var C=a(7185),l=a(7103),q=a(1815),T=a(2687),y=a(2216);class f{constructor(e,o){this.adminService=e,this.router=o,this.faUserCircle=T.m08}logout(){this.adminService._storageService.removeItem("user"),this.router.navigateByUrl("/login")}}f.\u0275fac=function(e){return new(e||f)(t.Y36(s),t.Y36(v.F0))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-admin-header"]],decls:14,vars:1,consts:[[1,"navbar","navbar-dark","bg-purple","navbar-expand-sm"],[1,"container-fluid","align-items-center","px-0"],[1,"d-flex","align-items-center","me-5"],["href","http://www.bisema.com","target","_blank",1,"navbar-brand"],["src","../assets/img/bisema_logo.jpg","alt","logo","height","35"],[1,"navbar-text","text-white","h5","me-5","pe-5","d-md-block","d-none"],[1,"me-2"],["ngbDropdown","","display","dynamic","placement","bottom-end",1,"nav-item","ms-3"],["tabindex","0","ngbDropdownToggle","","id","navbarDropdown3","role","button",1,"nav-link","text-white","userAnchor"],[3,"icon"],["ngbDropdownMenu","","aria-labelledby","navbarDropdown3",1,"dropdown-menu"],["ngbDropdownItem","","href","javascript:;",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),t._UZ(4,"img",4),t.qZA()(),t.TgZ(5,"div",5),t._uU(6," BiSemA Corporation Cloud Specification Services "),t.qZA(),t.TgZ(7,"div",6)(8,"div",7)(9,"a",8),t._UZ(10,"fa-icon",9),t.qZA(),t.TgZ(11,"div",10)(12,"a",11),t.NdJ("click",function(){return o.logout()}),t._uU(13,"Log Out"),t.qZA()()()()()()),2&e&&(t.xp6(10),t.Q6J("icon",o.faUserCircle))},dependencies:[l.jt,l.iD,l.Vi,l.TH,l.M2,y.BN],styles:[".userAnchor[_ngcontent-%COMP%]{font-size:20px}"]});class g{}g.\u0275fac=function(e){return new(e||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-admin-footer"]],decls:19,vars:0,consts:[[1,"row","bg-purple","pt-3"],[1,"col-12"],[1,"d-flex","justify-content-center"],[1,"list-inline","list-unstyled","m-0"],[1,"list-inline-item"],["href","https://www.facebook.com","target","https://www.facebook.com/bisemacorp",1,"text-white"],[1,"fa-brands","fa-facebook","fa-2x","me-2"],["href","https://www.linkedin.com ","target","https://www.linkedin.com/bisema-corporation",1,"text-white"],[1,"fa-brands","fa-linkedin","fa-2x","me-2"],["href","https://www.twitter.com ","target","https://www.twitter.com/bisemacorp",1,"text-white"],[1,"fa-brands","fa-twitter","fa-2x"],[1,"text-center","mt-3"],[1,"text-white"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),t._UZ(6,"i",6),t.qZA()(),t.TgZ(7,"li",4)(8,"a",7),t._UZ(9,"i",8),t.qZA()(),t.TgZ(10,"li",4)(11,"a",9),t._UZ(12,"i",10),t.qZA()()()(),t.TgZ(13,"div",11)(14,"p",12),t._uU(15,"Copyright "),t.TgZ(16,"span"),t._uU(17,"\xa9"),t.qZA(),t._uU(18," 2023 BiSemA Corporation."),t.qZA()()()())}});const w=["dataToExport"],x=["content"],D=function(n){return{"bg-red":n}};function k(n,e){if(1&n&&(t.TgZ(0,"tr",31)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",24),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"currency"),t.qZA()()),2&n){const o=e.$implicit,i=e.index;t.Q6J("ngClass",t.VKq(13,D,""==o.backgroundColor)),t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(o.manufacturingCompanyThreeLettersCode),t.xp6(2),t.Oqu(o.catalogThreeLettersCode),t.xp6(2),t.Oqu(o.fullSpecificationCode),t.xp6(2),t.Oqu(o.displayName),t.xp6(2),t.Oqu(t.lcZ(13,9,o.unitPrice)),t.xp6(3),t.Oqu(o.quantity),t.xp6(2),t.Oqu(t.lcZ(18,11,o.quantity*o.unitPrice))}}function S(n,e){1&n&&(t.TgZ(0,"div",32)(1,"p"),t._uU(2,"Your Order Admin Dealer has been sent."),t.qZA()())}const O=function(){return{label1:"Name"}},F=function(){return{label1:"Email"}},J=function(){return{label1:"Phone"}},M=function(){return{label1:"Address"}};class Z{constructor(e,o,i,A){this.fb=e,this.adminService=o,this.toastr=i,this.modalService=A,this.fromPerson=this.fb.group({name:["",[r.kI.required]],email:["",[r.kI.required,r.kI.email]],phone:["",[r.kI.required]],address:["",[r.kI.required]]}),this.cart=[],this.grandTotal=null,this.calGrandTotal=null,this.discountControl=new r.NI(""),this.discountControl.valueChanges.subscribe(u=>{this.calculateDiscount()})}getCart(){let e=this.adminService._storageService.getItem("user");e=JSON.parse(e),this.adminService.getAdminCartItems(e.id,e.projectID).subscribe({next:o=>{o&&o.data&&(this.cart=o.data,this.loadCartDetails())}})}loadCartDetails(){let e=0;this.cart.length>0&&this.cart.forEach(o=>{e+=+o.quantity*o.unitPrice}),this.grandTotal=parseFloat(e.toString()).toFixed(2),this.calGrandTotal=this.grandTotal}order(){if(this.cart.find(u=>u.finishCode.includes("?")))return void this.toastr.error("You cannot send order without choosing the finishes");let o=this,i=this.dataToExport.nativeElement;html2pdf().from(i).set({image:{type:"jpeg",quality:.98},html2canvas:{scale:3},jsPDF:{unit:"cm",format:"letter",orientation:"landscape"}}).toPdf().output("datauristring").then(function(u){u=u.split(",")[1];let p=new Date,N=p.getFullYear+"-"+("00"+(p.getMonth()+1)).slice(-2)+"-"+("00"+p.getDate()).slice(-2)+" "+("00"+p.getHours()).slice(-2)+":"+("00"+p.getMinutes()).slice(-2)+":"+("00"+p.getSeconds()).slice(-2),d=new FormData;d.append("pdf",u),d.append("email","bisema@gmail.com"),d.append("cart",JSON.stringify(o.cart)),d.append("users_email",`${o.fromPerson.value.email}`),d.append("user_name",`${o.fromPerson.value.name}`),d.append("total_price",`${o.calGrandTotal}`),d.append("orderConfirmationDate",N),o.adminService.sendEmail(d).subscribe({next:j=>{o.openOrderSuccessModal()}})})}openOrderSuccessModal(){this.modalService.open(this.content,{centered:!0,modalDialogClass:"modal-content-custom"})}calculateDiscount(){this.calGrandTotal=this.grandTotal-this.grandTotal/100*this.discountControl.value}ngOnInit(){this.getCart()}}Z.\u0275fac=function(e){return new(e||Z)(t.Y36(r.qu),t.Y36(s),t.Y36(C._W),t.Y36(l.FF))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["app-checkout"]],viewQuery:function(e,o){if(1&e&&(t.Gf(w,5),t.Gf(x,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.dataToExport=i.first),t.iGM(i=t.CRH())&&(o.content=i.first)}},decls:130,vars:25,consts:[[1,"container-fluid","bg-white"],[1,"row","px-4"],["bgcolor","#f1e5f8"],[1,"row"],["dataToExport",""],[1,"col-12"],[1,"d-flex","justify-content-between","py-2"],[1,"mt-2"],[1,"border-dark"],[1,"col-md-6","col-12"],[1,"mt-4"],[3,"formGroup"],["for","from_name",1,"form-label"],["type","text","id","from_name","placeholder","Enter Name","formControlName","name",1,"form-control"],[1,"text-danger"],["fieldType","input",3,"control","labels"],["for","from_email",1,"form-label"],["type","email","id","from_email","placeholder","Enter Email","formControlName","email",1,"form-control"],["for","from_phone",1,"form-label"],["type","text","id","from_phone","placeholder","Enter Phone","formControlName","phone",1,"form-control"],["for","from_address",1,"form-label"],["id","from_address","rows","3","formControlName","address",1,"form-control"],[1,"table","table-striped"],[1,"thead-light"],[2,"white-space","nowrap"],["class","",3,"ngClass",4,"ngFor","ngForOf"],[1,"border","border-0"],["type","text",1,"form-control",3,"formControl"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn2","me-1","px-3",3,"disabled","click"],["content",""],[1,"",3,"ngClass"],[1,"modal-body"]],template:function(e,o){1&e&&(t._UZ(0,"app-admin-header"),t.TgZ(1,"div",0)(2,"div",1)(3,"body",2)(4,"div",3,4)(6,"div",5)(7,"div",6)(8,"h4",7),t._uU(9," Invoice "),t.qZA()()(),t._UZ(10,"hr",8),t.TgZ(11,"div",9)(12,"h2",10),t._uU(13,"Buyer's Information : "),t.qZA(),t.TgZ(14,"form",11)(15,"div")(16,"label",12),t._uU(17,"Name"),t.qZA(),t._UZ(18,"input",13),t.TgZ(19,"label",14),t._UZ(20,"app-form-error-message",15),t.qZA()(),t.TgZ(21,"div")(22,"label",16),t._uU(23,"Email"),t.qZA(),t._UZ(24,"input",17),t.TgZ(25,"label",14),t._UZ(26,"app-form-error-message",15),t.qZA()(),t.TgZ(27,"div")(28,"label",18),t._uU(29,"Phone"),t.qZA(),t._UZ(30,"input",19),t.TgZ(31,"label",14),t._UZ(32,"app-form-error-message",15),t.qZA()(),t.TgZ(33,"div")(34,"label",20),t._uU(35,"Address"),t.qZA(),t._UZ(36,"textarea",21),t.TgZ(37,"label",14),t._UZ(38,"app-form-error-message",15),t.qZA()()()(),t.TgZ(39,"div",9)(40,"h2",10),t._uU(41,"Product Details"),t.qZA(),t.TgZ(42,"table",22)(43,"thead",23)(44,"tr")(45,"th"),t._uU(46,"#"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"Mfg"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Cat"),t.qZA(),t.TgZ(51,"th",24),t._uU(52,"Order Code"),t.qZA(),t.TgZ(53,"th"),t._uU(54,"Description"),t.qZA(),t.TgZ(55,"th"),t._uU(56,"Rate"),t.qZA(),t.TgZ(57,"th"),t._uU(58,"Quantity"),t.qZA(),t.TgZ(59,"th"),t._uU(60,"Amount"),t.qZA()()(),t.TgZ(61,"tbody"),t.YNc(62,k,19,15,"tr",25),t.TgZ(63,"tr"),t._UZ(64,"td",26)(65,"td",26)(66,"td")(67,"td")(68,"td"),t.TgZ(69,"td"),t._uU(70,"Discount %"),t.qZA(),t._UZ(71,"td"),t.TgZ(72,"td"),t._UZ(73,"input",27),t.qZA()(),t.TgZ(74,"tr"),t._UZ(75,"td",26)(76,"td",26)(77,"td")(78,"td")(79,"td"),t.TgZ(80,"td"),t._uU(81,"Sub Total"),t.qZA(),t._UZ(82,"td"),t.TgZ(83,"td"),t._uU(84),t.ALo(85,"currency"),t.qZA()(),t.TgZ(86,"tr"),t._UZ(87,"td",26)(88,"td",26)(89,"td")(90,"td")(91,"td"),t.TgZ(92,"td"),t._uU(93,"Tax (5%)"),t.qZA(),t._UZ(94,"td"),t.TgZ(95,"td"),t._uU(96,"0"),t.qZA()(),t.TgZ(97,"tr"),t._UZ(98,"td",26)(99,"td",26)(100,"td")(101,"td")(102,"td"),t.TgZ(103,"td"),t._uU(104,"Total"),t.qZA(),t._UZ(105,"td"),t.TgZ(106,"td"),t._uU(107),t.ALo(108,"currency"),t.qZA()(),t.TgZ(109,"tr"),t._UZ(110,"td",26)(111,"td",26)(112,"td")(113,"td")(114,"td"),t.TgZ(115,"td"),t._uU(116,"Balance Due"),t.qZA(),t._UZ(117,"td"),t.TgZ(118,"td")(119,"b"),t._uU(120,"CAD"),t.qZA(),t._uU(121),t.ALo(122,"currency"),t.qZA()()()()()(),t._UZ(123,"hr",8),t.TgZ(124,"div",28)(125,"button",29),t.NdJ("click",function(){return o.order()}),t._uU(126," Order "),t.qZA()()()(),t._UZ(127,"app-admin-footer"),t.qZA(),t.YNc(128,S,3,0,"ng-template",null,30,t.W1O)),2&e&&(t.xp6(14),t.Q6J("formGroup",o.fromPerson),t.xp6(6),t.Q6J("control",o.fromPerson.get("name"))("labels",t.DdM(21,O)),t.xp6(6),t.Q6J("control",o.fromPerson.get("email"))("labels",t.DdM(22,F)),t.xp6(6),t.Q6J("control",o.fromPerson.get("phone"))("labels",t.DdM(23,J)),t.xp6(6),t.Q6J("control",o.fromPerson.get("address"))("labels",t.DdM(24,M)),t.xp6(24),t.Q6J("ngForOf",o.cart),t.xp6(11),t.Q6J("formControl",o.discountControl),t.xp6(11),t.Oqu(t.lcZ(85,15,o.grandTotal)),t.xp6(23),t.Oqu(t.lcZ(108,17,o.grandTotal)),t.xp6(14),t.hij(" ",t.lcZ(122,19,o.calGrandTotal),""),t.xp6(4),t.Q6J("disabled",!o.fromPerson.valid))},dependencies:[b.mk,b.sg,q.J,r._Y,r.Fj,r.JJ,r.JL,r.oH,r.sg,r.u,f,g,b.H9],styles:[".modal-body[_ngcontent-%COMP%]{background:rgba(250,204,247,.5);border:2px solid #88149d;border-radius:25px}"]});class h{constructor(e,o){this.adminService=e,this.fb=o,this.faEnvelope=T.FU$,this.faKey=T.DD4,this.faArrowRight=T.eFW}ngOnInit(){}}h.\u0275fac=function(e){return new(e||h)(t.Y36(s),t.Y36(r.qu))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-users"]],decls:0,vars:0,template:function(e,o){}});const P=[{path:"checkout",component:Z},{path:"users",component:h}];class c{}c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[v.Bz.forChild(P),v.Bz]});var I=a(7929);class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({providers:[s],imports:[b.ez,I.m,c]})}}]);