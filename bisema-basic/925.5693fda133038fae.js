"use strict";(self.webpackChunkbisema_basic=self.webpackChunkbisema_basic||[]).push([[925],{6925:(J,A,a)=>{a.r(A),a.d(A,{AdminModule:()=>d});var b=a(6895),v=a(6491),n=a(433),e=a(1571),T=a(5136);class i extends T.b{constructor(t){super(t)}sendEmail(t){return this._networkService.post("api/order/mail",t)}getAdminCartItems(t,o){return this._networkService.get(`api/get/admin/cart/${t}/${o}`)}}i.\u0275fac=function(t){return new(t||i)(e.LFG(e.zs3))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac});var _=a(1815),g=a(2687),c=a(7103),U=a(2216);class p{constructor(t,o){this.adminService=t,this.router=o,this.faUserCircle=g.m08}logout(){this.adminService._storageService.removeItem("user"),this.router.navigateByUrl("/login")}}p.\u0275fac=function(t){return new(t||p)(e.Y36(i),e.Y36(v.F0))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-admin-header"]],decls:14,vars:1,consts:[[1,"navbar","navbar-dark","bg-purple","navbar-expand-sm"],[1,"container-fluid","align-items-center","px-0"],[1,"d-flex","align-items-center","me-5"],["href","http://www.bisema.com","target","_blank",1,"navbar-brand"],["src","../assets/img/bisema_logo.jpg","alt","logo","height","35"],[1,"navbar-text","text-white","h5","me-5","pe-5","d-md-block","d-none"],[1,"me-2"],["ngbDropdown","","display","dynamic","placement","bottom-end",1,"nav-item","ms-3"],["tabindex","0","ngbDropdownToggle","","id","navbarDropdown3","role","button",1,"nav-link","text-white"],[3,"icon"],["ngbDropdownMenu","","aria-labelledby","navbarDropdown3",1,"dropdown-menu"],["ngbDropdownItem","","href","javascript:;",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),e._UZ(4,"img",4),e.qZA()(),e.TgZ(5,"div",5),e._uU(6," BiSemA Corporation Cloud Specification Services "),e.qZA(),e.TgZ(7,"div",6)(8,"div",7)(9,"a",8),e._UZ(10,"fa-icon",9),e.qZA(),e.TgZ(11,"div",10)(12,"a",11),e.NdJ("click",function(){return o.logout()}),e._uU(13,"Log Out"),e.qZA()()()()()()),2&t&&(e.xp6(10),e.Q6J("icon",o.faUserCircle))},dependencies:[c.jt,c.iD,c.Vi,c.TH,c.M2,U.BN]});class u{}u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-admin-footer"]],decls:19,vars:0,consts:[[1,"row","bg-purple","pt-3"],[1,"col-12"],[1,"d-flex","justify-content-center"],[1,"list-inline","list-unstyled","m-0"],[1,"list-inline-item"],["href","https://www.facebook.com","target","https://www.facebook.com/bisemacorp",1,"text-white"],[1,"fa-brands","fa-facebook","fa-2x","me-2"],["href","https://www.linkedin.com ","target","https://www.linkedin.com/bisema-corporation",1,"text-white"],[1,"fa-brands","fa-linkedin","fa-2x","me-2"],["href","https://www.twitter.com ","target","https://www.twitter.com/bisemacorp",1,"text-white"],[1,"fa-brands","fa-twitter","fa-2x"],[1,"text-center","mt-3"],[1,"text-white"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),e._UZ(6,"i",6),e.qZA()(),e.TgZ(7,"li",4)(8,"a",7),e._UZ(9,"i",8),e.qZA()(),e.TgZ(10,"li",4)(11,"a",9),e._UZ(12,"i",10),e.qZA()()()(),e.TgZ(13,"div",11)(14,"p",12),e._uU(15,"Copyright "),e.TgZ(16,"span"),e._uU(17,"\xa9"),e.qZA(),e._uU(18," 2023 BiSemA Corporation."),e.qZA()()()())}});const q=["dataToExport"];function w(r,t){if(1&r&&(e.TgZ(0,"tr",27)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"currency"),e.qZA()()),2&r){const o=t.$implicit,s=t.index;e.xp6(2),e.Oqu(s+1),e.xp6(2),e.Oqu(o.displayName),e.xp6(2),e.Oqu(e.lcZ(7,5,o.unitPrice)),e.xp6(3),e.Oqu(o.quantity),e.xp6(2),e.Oqu(e.lcZ(12,7,o.quantity*o.unitPrice))}}const y=function(){return{label1:"Name"}},C=function(){return{label1:"Email"}},x=function(){return{label1:"Phone"}},k=function(){return{label1:"Address"}};class f{constructor(t,o){this.fb=t,this.adminService=o,this.fromPerson=this.fb.group({name:["",[n.kI.required]],email:["",[n.kI.required,n.kI.email]],phone:["",[n.kI.required]],address:["",[n.kI.required]]}),this.cart=[],this.grandTotal=null}getCart(){let t=this.adminService._storageService.getItem("user");t=JSON.parse(t),this.adminService.getAdminCartItems(t.id,t.projectID).subscribe({next:o=>{o&&o.data&&(this.cart=o.data,this.loadCartDetails())}})}loadCartDetails(){let t=0;this.cart.length>0&&this.cart.forEach(o=>{t+=+o.quantity*o.unitPrice}),this.grandTotal=parseFloat(t.toString()).toFixed(2)}order(){let t=this,o=this.dataToExport.nativeElement;html2pdf().from(o).set({image:{type:"jpeg",quality:.98},html2canvas:{scale:3},jsPDF:{unit:"cm",format:"letter",orientation:"landscape"}}).toPdf().output("datauristring").then(function(h){h=h.split(",")[1],console.log(h);let m=new FormData;m.append("pdf",h),m.append("email","bisema@gmail.com"),m.append("cart",JSON.stringify(t.cart)),m.append("users_email",`${t.fromPerson.value.email}`),m.append("user_name",`${t.fromPerson.value.name}`),t.adminService.sendEmail(m).subscribe({next:S=>{console.log(S)}})})}ngOnInit(){this.getCart()}}f.\u0275fac=function(t){return new(t||f)(e.Y36(n.qu),e.Y36(i))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-checkout"]],viewQuery:function(t,o){if(1&t&&e.Gf(q,5),2&t){let s;e.iGM(s=e.CRH())&&(o.dataToExport=s.first)}},decls:106,vars:24,consts:[[1,"container-fluid","bg-white"],[1,"row","px-4"],[1,"row"],["dataToExport",""],[1,"col-12"],[1,"d-flex","justify-content-between","py-2"],[1,"mt-2"],[1,"border-dark"],[1,"col-md-6","col-12"],[1,"mt-4"],[3,"formGroup"],["for","from_name",1,"form-label"],["type","text","id","from_name","placeholder","Enter Name","formControlName","name",1,"form-control"],[1,"text-danger"],["fieldType","input",3,"control","labels"],["for","from_email",1,"form-label"],["type","email","id","from_email","placeholder","Enter Email","formControlName","email",1,"form-control"],["for","from_phone",1,"form-label"],["type","text","id","from_phone","placeholder","Enter Phone","formControlName","phone",1,"form-control"],["for","from_address",1,"form-label"],["id","from_address","rows","3","formControlName","address",1,"form-control"],[1,"table","table-striped"],[1,"thead-light"],["class","",4,"ngFor","ngForOf"],[1,"border","border-0"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn2","me-1","px-3",3,"disabled","click"],[1,""]],template:function(t,o){1&t&&(e._UZ(0,"app-admin-header"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2,3)(5,"div",4)(6,"div",5)(7,"h4",6),e._uU(8," Invoice "),e.qZA()()(),e._UZ(9,"hr",7),e.TgZ(10,"div",8)(11,"h2",9),e._uU(12,"Buyer's Information : "),e.qZA(),e.TgZ(13,"form",10)(14,"div")(15,"label",11),e._uU(16,"Name"),e.qZA(),e._UZ(17,"input",12),e.TgZ(18,"label",13),e._UZ(19,"app-form-error-message",14),e.qZA()(),e.TgZ(20,"div")(21,"label",15),e._uU(22,"Email"),e.qZA(),e._UZ(23,"input",16),e.TgZ(24,"label",13),e._UZ(25,"app-form-error-message",14),e.qZA()(),e.TgZ(26,"div")(27,"label",17),e._uU(28,"Phone"),e.qZA(),e._UZ(29,"input",18),e.TgZ(30,"label",13),e._UZ(31,"app-form-error-message",14),e.qZA()(),e.TgZ(32,"div")(33,"label",19),e._uU(34,"Address"),e.qZA(),e._UZ(35,"textarea",20),e.TgZ(36,"label",13),e._UZ(37,"app-form-error-message",14),e.qZA()()()(),e.TgZ(38,"div",8)(39,"h2",9),e._uU(40,"Product Details"),e.qZA(),e.TgZ(41,"table",21)(42,"thead",22)(43,"tr")(44,"th"),e._uU(45,"#"),e.qZA(),e.TgZ(46,"th"),e._uU(47,"Description"),e.qZA(),e.TgZ(48,"th"),e._uU(49,"Rate"),e.qZA(),e.TgZ(50,"th"),e._uU(51,"Quantity"),e.qZA(),e.TgZ(52,"th"),e._uU(53,"Amount"),e.qZA()()(),e.TgZ(54,"tbody"),e.YNc(55,w,13,9,"tr",23),e.TgZ(56,"tr"),e._UZ(57,"td",24)(58,"td",24),e.TgZ(59,"td"),e._uU(60,"Discount %"),e.qZA(),e._UZ(61,"td"),e.TgZ(62,"td"),e._uU(63,"20%"),e.qZA()(),e.TgZ(64,"tr"),e._UZ(65,"td",24)(66,"td",24),e.TgZ(67,"td"),e._uU(68,"Sub Total"),e.qZA(),e._UZ(69,"td"),e.TgZ(70,"td"),e._uU(71),e.ALo(72,"currency"),e.qZA()(),e.TgZ(73,"tr"),e._UZ(74,"td",24)(75,"td",24),e.TgZ(76,"td"),e._uU(77,"Tax (5%)"),e.qZA(),e._UZ(78,"td"),e.TgZ(79,"td"),e._uU(80,"0"),e.qZA()(),e.TgZ(81,"tr"),e._UZ(82,"td",24)(83,"td",24),e.TgZ(84,"td"),e._uU(85,"Total"),e.qZA(),e._UZ(86,"td"),e.TgZ(87,"td"),e._uU(88),e.ALo(89,"currency"),e.qZA()(),e.TgZ(90,"tr"),e._UZ(91,"td",24)(92,"td",24),e.TgZ(93,"td"),e._uU(94,"Balance Due"),e.qZA(),e._UZ(95,"td"),e.TgZ(96,"td")(97,"b"),e._uU(98,"CAD"),e.qZA(),e._uU(99),e.ALo(100,"currency"),e.qZA()()()()()(),e._UZ(101,"hr",7),e.TgZ(102,"div",25)(103,"button",26),e.NdJ("click",function(){return o.order()}),e._uU(104," Order "),e.qZA()()(),e._UZ(105,"app-admin-footer"),e.qZA()),2&t&&(e.xp6(13),e.Q6J("formGroup",o.fromPerson),e.xp6(6),e.Q6J("control",o.fromPerson.get("name"))("labels",e.DdM(20,y)),e.xp6(6),e.Q6J("control",o.fromPerson.get("email"))("labels",e.DdM(21,C)),e.xp6(6),e.Q6J("control",o.fromPerson.get("phone"))("labels",e.DdM(22,x)),e.xp6(6),e.Q6J("control",o.fromPerson.get("address"))("labels",e.DdM(23,k)),e.xp6(18),e.Q6J("ngForOf",o.cart),e.xp6(16),e.Oqu(e.lcZ(72,14,o.grandTotal)),e.xp6(17),e.Oqu(e.lcZ(89,16,o.grandTotal)),e.xp6(11),e.hij(" ",e.lcZ(100,18,o.grandTotal),""),e.xp6(4),e.Q6J("disabled",!o.fromPerson.valid))},dependencies:[b.sg,_.J,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,p,u,b.H9]});class Z{constructor(t,o){this.adminService=t,this.fb=o,this.faEnvelope=g.FU$,this.faKey=g.DD4,this.faArrowRight=g.eFW}ngOnInit(){}}Z.\u0275fac=function(t){return new(t||Z)(e.Y36(i),e.Y36(n.qu))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["app-users"]],decls:0,vars:0,template:function(t,o){}});const D=[{path:"checkout",component:f},{path:"users",component:Z}];class l{}l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[v.Bz.forChild(D),v.Bz]});var F=a(710);class d{}d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({providers:[i],imports:[b.ez,F.m,l]})}}]);